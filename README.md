
![](docs/img/logo_mid.png)


# LIBFCN 2.0 - Flexible Controller Network<br>灵活的控制器网络 

--------------

## 1. 特性
 
- **适用于微控制器的实时消息中间件 ：** 赋能消费电子、机器人、工控领域，产品级、快速、可靠的原型开发。

- **兼容性：**
    - 跨总线：支持共享内存、CAN、UART、RS485、以太网等，可无缝、无感地衔接不同种类通信方式。
    - 跨平台：一套代码可支持STM32裸机，Windows，Linux，MacOSX
    
- **分布式：** 网络拓扑为多主（Multi-Master）软总线，无需中心节点，便于更改网络结构。
- **发布者-订阅者 Publisher-Subscriber：** 多对多实时消息收发。
- **参数服务器 Parameter Server：** 可靠的同步/异步参数读写服务。
- **远程过程调用 RPC：** 可靠的同步/异步请求发送和应答响应。
- **远程固件升级 OTA Update：** 可对任意一个或多个节点进行可靠的固件下载。
- **接口定义语言 IDL：** 面向用户的消息API由脚本自动生成，用户只需定义消息名称和类型。可快速适配新需求。
- **节点映射 Node Mapping：** 同一个MCU上可以有多个通信节点，每个节点均可像在一个独立的MCU
上一样工作：每个节点拥有独立的地址，可通过本地或网络上任一其它节点直接访问。这使得硬件架构的变化变得简单：比如，不论某传感器/执行器位于哪个MCU
，均可以以相同的方式访问它。而同一MCU上多节点之间采用共享内存通信，和使用全局变量直接传递数据效率相同，在需要无延迟的高性能控制场景也适用。
- **超轻量：** 可直接运行于无RTOS的STM32，占用不到10kROM，无需中断请求。消息收发及调度额外开销几乎为零，效率接近直接面向寄存器开发。
- **丰富的调试工具：** 
    - 总线调试器FCNProbe: 硬件+上位机，高帧率数据记录、回放。上位机Windows，Linux，MacOSX全平台兼容。
    - FCNVis: 数据可视化上位机，Windows，Linux，MacOSX全平台兼容。
    - Tracer: MCU/上位机通用的轻量C++调试信息打印库，可自定义过滤等级、输出目标，在终端中彩色显示。打印为非阻塞式，即便输出较多的信息也不影响程序行为。

--------------

## 2. 克隆仓库并运行第一个测试
### 前置需求
- Windows
  - Windows 10
  - CLion 2020
  - Visual Studio 2019 Community  
  - Git vckpg CMake
  - GTest (从vckpg安装)
  - FT232 VCom Driver  

        提示：您可能需要将系统编码格式改为UTF-8以消除编译错误

- Linux 
  - CLion 2020 
  - git clang  
  - GTest

- MacOSX
  - CLion 2020
  - git clang
  - GTest

--------------
###
## 3. 使用入门
### 3.1 启动节点并添加网络设备

### 3.2 发布者-订阅者
**定义消息**

**发布消息**

**订阅消息**

### 3.3 参数服务器
**定义消息**

**服务器**

**客户端**

--------------
详细文档见[这里](docs/doxygen/html/index.html) 